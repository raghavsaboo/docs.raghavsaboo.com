
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.raghavsaboo.com/Technical/Algorithms%20and%20Data%20Structures/Data%20Structures/trees.html">
      
      
        <link rel="prev" href="stacks.html">
      
      
        <link rel="next" href="tries.html">
      
      
      <link rel="icon" href="../../../assets/profile.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>Trees - Raghav Saboo's Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-9SNPZHF2CX"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-9SNPZHF2CX",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-9SNPZHF2CX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trees" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="Raghav Saboo&#39;s Wiki" class="md-header__button md-logo" aria-label="Raghav Saboo's Wiki" data-md-component="logo">
      
  <img src="../../../assets/profile.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Raghav Saboo's Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trees
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Non-Technical/Areas%20of%20Interest.html" class="md-tabs__link">
          
  
  Non Technical

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Areas%20of%20Interest.html" class="md-tabs__link">
          
  
  Technical

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Raghav Saboo&#39;s Wiki" class="md-nav__button md-logo" aria-label="Raghav Saboo's Wiki" data-md-component="logo">
      
  <img src="../../../assets/profile.png" alt="logo">

    </a>
    Raghav Saboo's Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Non Technical
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Non Technical
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Non-Technical/Areas%20of%20Interest.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Areas of Interest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Business
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Business
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Non-Technical/Business/Books/The%20Personal%20MBA%20by%20Josh%20Kaufman.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Personal MBA
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mental Models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Mental Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Non-Technical/Mental%20Models/reference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Psychology
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Psychology
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1" >
        
          
          <label class="md-nav__link" for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Non-Technical/Psychology/Books/Alchemy%3A%20The%20Dark%20Art%20and%20Curious%20Science%20of%20Creating%20Magin%20in%20Brands%2C%20Business%2C%20and%20Life.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alchemy by Rory Sutherland
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Story Telling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Story Telling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_1" >
        
          
          <label class="md-nav__link" for="__nav_2_5_1" id="__nav_2_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Books
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_1">
            <span class="md-nav__icon md-icon"></span>
            Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Non-Technical/Story%20Telling/Books/Storyworthy%20by%20Matthew%20Dicks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storyworthy by Matthew Dicks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Technical
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Technical
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Areas%20of%20Interest.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Areas of Interest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Algorithms and Data Structures
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Algorithms and Data Structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Algorithms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/analysis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Algorithmic Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/backtracking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backtracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/convex%20hull.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convex Hull
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/graph%20traversals.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graph Traversals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/greedy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greedy Methods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/recursion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recursion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/searching.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Searching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/selection.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/sorting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sorting Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/text%20processing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text Processing and Pattern Matching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/tree%20traversals.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tree Traversals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_12" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_12" id="__nav_3_2_1_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dynamic Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_12">
            <span class="md-nav__icon md-icon"></span>
            Dynamic Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Dual%20Sequence%20or%20DP%20on%20Subsequences.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dual Sequence or DP on Subsequences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Grids.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pattern: Grids
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Interval.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interval Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Knapsack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Knapsack Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Linear%20Sequences%20with%20Constant%20Transition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pattern: Linear Sequences with Constant Transition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Linear%20Sequences%20with%20Non-Constant%20Transition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linear Sequences with Non-Constant Transition Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/Pattern%3A%20Matrix%20Chain-Product%20Problem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix Chain-Product Problem: Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Dynamic%20Programming/dynamic%20programming.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_13" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_13" id="__nav_3_2_1_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Patterns
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_13">
            <span class="md-nav__icon md-icon"></span>
            Patterns
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algorithms/Patterns/optimization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Structures
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            Data Structures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="arrays.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="conflict%20free%20replicated%20data%20type.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CRDT: Conflict Free Replicated Data Type
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="disjoint%20set%20union.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disjoint Set Union
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="geospatial.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geospatial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="graphs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="linked%20lists.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linked Lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="maps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maps, Hash Tables, Skip Lists and Sets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="monotonic%20stack%20and%20queue.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monotonic stack and queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="positional.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Positional
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="priority%20queues.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Priority Queues and Heaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="queues%20and%20deques.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Queues and Deques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="segment%20tree.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segment tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="skip%20lists.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Skip Lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="stacks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Trees
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="trees.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Trees
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ordered-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Ordered Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-abstract-base-class" class="md-nav__link">
    <span class="md-ellipsis">
      Tree Abstract Base Class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linked-structure-for-general-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Linked Structure for General Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Binary Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recursive-definitions-of-a-binary-search-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Recursive Definitions of a Binary Search Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#properfull" class="md-nav__link">
    <span class="md-ellipsis">
      Proper/Full
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfect" class="md-nav__link">
    <span class="md-ellipsis">
      Perfect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete" class="md-nav__link">
    <span class="md-ellipsis">
      Complete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balanced" class="md-nav__link">
    <span class="md-ellipsis">
      Balanced
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    <span class="md-ellipsis">
      Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-based-binary-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Array Based Binary Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilizing-the-general-tree-linked-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Utilizing the General Tree Linked Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-traversal-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Tree Traversal Algorithms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-search-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Search Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navigating-binary-search-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Navigating Binary Search Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Navigating Binary Search Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searches" class="md-nav__link">
    <span class="md-ellipsis">
      Searches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertions" class="md-nav__link">
    <span class="md-ellipsis">
      Insertions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletions" class="md-nav__link">
    <span class="md-ellipsis">
      Deletions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Python Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-balancing-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Self Balancing Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self Balancing Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#right-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Right Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#left-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Left Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visual-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Representation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      AVL Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AVL Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion-in-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion in AVL Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Insertion in AVL Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotations-for-rebalancing" class="md-nav__link">
    <span class="md-ellipsis">
      Rotations for Rebalancing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-in-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion in AVL Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Performance of AVL Trees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#red-black-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Red-Black Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Red-Black Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Rotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-implementation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Python Implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Splay Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Splay Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Key Characteristics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splaying-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Splaying Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Searching in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Performance of Splay Trees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-trees" class="md-nav__link">
    <span class="md-ellipsis">
      (2,4) Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="(2,4) Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics_1" class="md-nav__link">
    <span class="md-ellipsis">
      Key Characteristics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-in-24-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Operations in (2,4) Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operations in (2,4) Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      Searching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balancing-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Balancing and Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segment-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Segment Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fenwick-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Fenwick Trees
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tries.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CUDA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            CUDA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CUDA/references.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Distributed Systems Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Distributed Systems Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    System Designs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            System Designs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Distributed%20Cache.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Distributed%20Message%20Queue.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributed Message Queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Experimentation%20Platform.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimentation Platform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Github.com.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github.com
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Google%20Docs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Google%20Maps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Google%20News.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google News
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Hyperlocal%20Apps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hyperlocal Apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Key%20Value%20Store.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Key Value Store
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Messaging%20App.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Messaging App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Notification%20Systems.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notification Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Rate%20Limiter.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rate Limiter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Realtime%20Events%20and%20Logging%20Systems.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Realtime Events and Logging Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Reservation%20or%20Ticketing%20Systems.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reservation or Ticketing Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Ride%20Sharing%20Apps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ride Sharing Apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Search%20System.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Social%20Media%20App.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Social Media App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/URL%20Forwarding%20or%20Object%20Sharing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    URL Forwarding or Object Sharing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Video%20Sharing%20App.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Sharing App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Web%20Crawler.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Crawler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Designs/Workflow%20Automation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow Automation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Great Writeups
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            Great Writeups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Great%20Writeups/links.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Great Distributed System Writeups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Interview%20Notes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interview Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Monolith%20vs.%20Microservices.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monolith vs. Microservices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Coupling%20and%20Cohesion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coupling and Cohesion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Web%20Server.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Proxy%20and%20Reverse%20Proxy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxy and Reverse Proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Load%20Balancing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Balancing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Domain%20Name%20System.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domain Name System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Caching.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Content%20Delivery%20Network.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Content Delivery Network (CDN)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Networking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/System%20Integration%20and%20Communication.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Integration and Communication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Object%20Storage.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Object Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Databases.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Data%20Models.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Embedded%20Schemas%20and%20Denormalization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Embedded Schemas and Denormalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/CAP%20Theorem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAP Theorem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/PACELC%20Theorem.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PACELC Theorem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/ACID%20vs%20BASE.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACID vs BASE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Consistency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consistency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Vertical%20and%20Horizontal%20Scaling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vertical and Horizontal Scaling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Consistent%20Hashing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consistent Hashing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Consensus%20Algorithms.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consensus Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Orchestration%20vs.%20Choreography.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestration vs. Choreography
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Coordination%20Service.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordination Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Asynchronous%20Processing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asynchronous and Realtime Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Fan%20Out.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fan Out Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Big%20Data%2C%20Hadoop%20and%20Spark.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Big Data, Hadoop and Spark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Rate%20Limiter.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rate Limiter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Unique%20ID%20Generators.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unique ID Generators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Monitoring.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/Testing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Distributed%20Systems%20Design/References.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Experimentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Experimentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Experimentation/Basic%20Probability%20and%20Statistics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Probability and Statistics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Experimentation/Outline.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Machine Learning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Machine Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/references.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_2" >
        
          
          <label class="md-nav__link" for="__nav_3_6_2" id="__nav_3_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    System Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6_2">
            <span class="md-nav__icon md-icon"></span>
            System Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/System%20Design/Ads%20Auction%20and%20Click%20Prediction.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ads Auction and Click Prediction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/System%20Design/Recommendation%20Service.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recommendation Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/System%20Design/Search%20System.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/System%20Design/Similar%20Listings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Similar Listings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Math
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7_1" >
        
          
          <label class="md-nav__link" for="__nav_3_7_1" id="__nav_3_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linear Algebra
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7_1">
            <span class="md-nav__icon md-icon"></span>
            Linear Algebra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Math/Linear%20Algebra/Numpy%20and%20PyTorch%20Tensors%20Guide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Numpy and PyTorch Tensors Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Math/Linear%20Algebra/basics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Math/Linear%20Algebra/matrix%20decomposition.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix Decomposition Methods
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7_2" >
        
          
          <label class="md-nav__link" for="__nav_3_7_2" id="__nav_3_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Probability
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7_2">
            <span class="md-nav__icon md-icon"></span>
            Probability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Math/Probability/jensens%20inequality.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jensens inequality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Math/Probability/map%20of%20univariate%20distributions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Map of Univariate Distributions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Object Oriented Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Object Oriented Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/abstract%20base%20class.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Abstract Base Class
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/adapter_pattern.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adapter pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/composition%20pattern.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Composition Pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/factory.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Factory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/goals.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Goals and Principles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/inheritance.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inheritance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/interface.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/observer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Observer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Object%20Oriented%20Programming/template%20method%20pattern.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template Method
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_1" >
        
          
          <label class="md-nav__link" for="__nav_3_9_1" id="__nav_3_9_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/Docker/reference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_2" >
        
          
          <label class="md-nav__link" for="__nav_3_9_2" id="__nav_3_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/Kubernetes/reference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_3" >
        
          
          <label class="md-nav__link" for="__nav_3_9_3" id="__nav_3_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    React
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_3">
            <span class="md-nav__icon md-icon"></span>
            React
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/React/current%20build%20stack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    My Go To Stack for Projects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_4" >
        
          
          <label class="md-nav__link" for="__nav_3_9_4" id="__nav_3_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vim
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_4">
            <span class="md-nav__icon md-icon"></span>
            Vim
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/Vim/useful%20commands.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful Vim Commands
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ordered-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Ordered Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-abstract-base-class" class="md-nav__link">
    <span class="md-ellipsis">
      Tree Abstract Base Class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linked-structure-for-general-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Linked Structure for General Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Binary Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recursive-definitions-of-a-binary-search-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Recursive Definitions of a Binary Search Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#properfull" class="md-nav__link">
    <span class="md-ellipsis">
      Proper/Full
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perfect" class="md-nav__link">
    <span class="md-ellipsis">
      Perfect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete" class="md-nav__link">
    <span class="md-ellipsis">
      Complete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balanced" class="md-nav__link">
    <span class="md-ellipsis">
      Balanced
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    <span class="md-ellipsis">
      Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-based-binary-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Array Based Binary Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilizing-the-general-tree-linked-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Utilizing the General Tree Linked Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tree-traversal-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Tree Traversal Algorithms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-search-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Search Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navigating-binary-search-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Navigating Binary Search Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Navigating Binary Search Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searches" class="md-nav__link">
    <span class="md-ellipsis">
      Searches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertions" class="md-nav__link">
    <span class="md-ellipsis">
      Insertions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletions" class="md-nav__link">
    <span class="md-ellipsis">
      Deletions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Python Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#self-balancing-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Self Balancing Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Self Balancing Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#right-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Right Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#left-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      Left Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visual-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Representation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      AVL Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AVL Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion-in-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion in AVL Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Insertion in AVL Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotations-for-rebalancing" class="md-nav__link">
    <span class="md-ellipsis">
      Rotations for Rebalancing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-in-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion in AVL Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-avl-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Performance of AVL Trees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#red-black-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Red-Black Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Red-Black Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Rotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-implementation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Python Implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Splay Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Splay Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Key Characteristics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#splaying-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Splaying Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insertion-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching-in-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Searching in Splay Trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-of-splay-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Performance of Splay Trees
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-trees" class="md-nav__link">
    <span class="md-ellipsis">
      (2,4) Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="(2,4) Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics_1" class="md-nav__link">
    <span class="md-ellipsis">
      Key Characteristics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operations-in-24-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Operations in (2,4) Trees
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operations in (2,4) Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insertion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      Searching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balancing-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Balancing and Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segment-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Segment Trees
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fenwick-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Fenwick Trees
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="trees">Trees</h1>
<p>Trees are a non-linear data structure that allow us to implement a range of agorithms that are faster than using linear data structures like array-based lists or linked lists. Trees also provide a natural organizationof data, and have become ubiquitous structures in file systems, GUIs, databses etc.</p>
<p>Trees are <strong>hierarchical</strong> representation of a set of <strong>nodes</strong> storing elements such that the nodes have a <strong>parent-child</strong> relationship with the following definitions and properties:</p>
<ul>
<li><strong>root</strong> - top node of a tree</li>
<li><strong>parent</strong> - except for the root node, all nodes in a tree have a parent</li>
<li><strong>children</strong> - nodes in a tree may have zero or more children</li>
<li><strong>depth</strong> <span class="arithmatex">\(d_p\)</span> - for a position <code>p</code> of a node in a tree <code>T</code>, the depth of <code>p</code> is the number of ancestors of <code>p</code>, excluding <code>p</code> itself. (but it includes the root node)</li>
<li>e.g. if <code>p</code> is the root, then its depth is 0, otherwise it is <code>1 + depth of the parent</code></li>
<li><strong>height</strong> <span class="arithmatex">\(h_p\)</span> - defined from the leaf of the tree, defined recursively</li>
<li>e.g. if <code>p</code> is the leaf of a tree, its height is 0, otherwise it is <code>1 + max(height of children)</code></li>
<li>the height of a non-empty tree T is equal to the maximum of the depths of its leaf positions</li>
</ul>
<p>In a tree, each node of the tree apart from the root node has a unique parent node, and every node with a parent is a child node.</p>
<p>Trees can be empty (i.e. don't even have a root node) which allows for recursive definitions such that:</p>
<ol>
<li>a tree <code>T</code> is either empty or consists of a root node <code>r</code></li>
<li>root node <code>r</code> has a set of set of subtrees whose roots are the children of <code>r</code></li>
</ol>
<h2 id="ordered-trees">Ordered Trees</h2>
<p>A tree is <strong>ordered</strong> if there is a meaningful linear order among the children of each node - i.e. we can identify the children of a node as being the first, second, third and so on. This is usually visualized by arranng siblings left to right, according to their order.</p>
<h2 id="tree-abstract-base-class">Tree Abstract Base Class</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Position</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<span class="k">class</span> <span class="nc">Tree</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">num_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented by subclass&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_root</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()</span> <span class="o">==</span> <span class="n">position</span>

    <span class="k">def</span> <span class="nf">is_leaf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_children</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">depth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span> <span class="c1"># O(d_p + 1)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_root</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span> <span class="c1"># O(n)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_leaf</span><span class="p">(</span><span class="n">position</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">position</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="linked-structure-for-general-trees">Linked Structure for General Trees</h2>
<p>A natural way to represent a tree is through a <strong>linked structure</strong>, with nodes that maintain references to the elment stores at a position <code>p</code> and to the nodes associated with the children and parent of <code>p</code>.</p>
<p>For a general tree, there is no limit on the number of children that a node may have. A natural way to realize a general tree <code>T</code> as a linked structure is to have each node store a single <strong>container</strong> of references to its children.</p>
<p>The tree itself also maintainsan instance variable storing a reference to the root node, and a variable called <code>size</code> that represents the overall number of nodes of <code>T</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TreeNode</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s1">&#39;_element&#39;</span><span class="p">,</span> <span class="s1">&#39;_parent&#39;</span><span class="p">,</span> <span class="s1">&#39;_left&#39;</span><span class="p">,</span> <span class="s1">&#39;_right&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_element</span> <span class="o">=</span> <span class="n">element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="n">children</span>

<span class="k">class</span> <span class="nc">TreePosition</span><span class="p">(</span><span class="n">Position</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">node</span>

    <span class="k">def</span> <span class="nf">element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_element</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">_node</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span>

<span class="k">class</span> <span class="nc">GeneralTree</span><span class="p">(</span><span class="n">Tree</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_make_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="n">ifnode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Position</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;p must be proper Position type&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">_container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;p does not belong to this container&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;p is no longer valid&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>

    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_postion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">num_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">positions</span><span class="p">():</span>
            <span class="k">yield</span> <span class="n">p</span><span class="o">.</span><span class="n">element</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">positions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">preorder</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">preorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_preorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()):</span>
                <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_subtree_preorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_preorder</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">postorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_postorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()):</span>
                <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_subtree_postorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_postorder</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">other</span>
        <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">breadthfirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="n">fringe</span> <span class="o">=</span> <span class="n">LinkedQueue</span><span class="p">()</span>
            <span class="n">fringe</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">fringe</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">fringe</span><span class="o">.</span><span class="n">dequeue</span><span class="p">()</span>
                <span class="k">yield</span> <span class="n">p</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
                    <span class="n">fringe</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="binary-trees">Binary Trees</h2>
<p>A <strong>binary tree</strong> is an ordered tree with the following properties:</p>
<ol>
<li>Every node has at most two children</li>
<li>Each child node is labeled as being either a <strong>left child</strong> or a <strong>right child</strong></li>
<li>A left child precedes a right child in the order of children of the node</li>
</ol>
<p>The subtree rooted at the left child is called a <strong>left subtree</strong> and rooted at the right a <strong>right subtree</strong>.</p>
<h3 id="recursive-definitions-of-a-binary-search-tree">Recursive Definitions of a Binary Search Tree</h3>
<p>A binary tree is either empty or consists of:</p>
<ol>
<li>a node <code>r</code>, called the root of <code>T</code>, that stores an element</li>
<li>a binary tree (possibly empty), called the left subtree of <code>T</code></li>
<li>a binary tree (possibly empty), called the right subtree of <code>T</code></li>
</ol>
<h3 id="types">Types</h3>
<h4 id="properfull">Proper/Full</h4>
<p>A <strong>Full</strong> or <strong>Proper</strong> binary search tree is one where each node has either zero or two children. Therefore internal parent nodes always have exactly two children.
<a class="glightbox" href="images/full%20binary%20tree.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="wiki source: https://en.wikipedia.org/wiki/Binary_tree#/media/File:Full_binary.svg" src="images/full%20binary%20tree.png" /></a></p>
<p>An example is <strong>expression trees</strong> that capture the arithmetic expression e.g. <code>(((3+1)x3)/((9-5)+2)</code> as shown below:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>                (/)
                / \
               /   \
             (x)    (+)
            /  \    /  \
          (+)   3  (-)  2
         /  \      / \
        3    1    9   5
</code></pre></div></td></tr></table></div>
<h4 id="perfect">Perfect</h4>
<p>All interior nodes have two children and all leaves have the same depth or same level. A perfect binary tree is also a full binary tree.</p>
<h4 id="complete">Complete</h4>
<p>All levels of the binary tree (0, 1, 2, ..., h -1) have maximum number of nodes possible (i.e. <span class="arithmatex">\(2^i\)</span> nodes for <span class="arithmatex">\(i \leq i \leq h-1\)</span>) and the remaining nodes at level <code>h</code> reside in the <strong>leftmost</strong> possible positions at that level.
<a class="glightbox" href="images/complete%20binary%20tree.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="wiki source: https://en.wikipedia.org/wiki/Binary_tree#/media/File:Complete_binary2.svg" src="images/complete%20binary%20tree.png" /></a></p>
<h4 id="balanced">Balanced</h4>
<p>Where left and rigt subtrees of every node differ in height by at most 1. i.e. where no leaf is much farther away from the root than any other leaf.</p>
<h3 id="properties">Properties</h3>
<p><strong>Level</strong> of a tree is a set of nodes at the same depth.</p>
<p>So in a binary tree, level 0 has at most 1 node. Level 1 has at most 2 nodes. Level 2 has at most 4 nodes etc.</p>
<p>So in general, a level <code>d</code> has at most <span class="arithmatex">\(2^d\)</span> nodes.</p>
<p>Therefore from this we can see that the number of nodes at any given level is exponential. From this we can define the following properties where - <span class="arithmatex">\(n_E\)</span> is number of external nodes, <span class="arithmatex">\(n_I\)</span> is the number of internal nodes, <span class="arithmatex">\(n\)</span> is the numberof nodes, and <span class="arithmatex">\(h\)</span> is the height of the tree:</p>
<ol>
<li><span class="arithmatex">\(h + 1 \leq n \leq 2^{h+1}-1\)</span></li>
<li><span class="arithmatex">\(1 \leq n_E \leq 2^h\)</span></li>
<li><span class="arithmatex">\(h \leq n_I \leq 2^h - 1\)</span></li>
<li><span class="arithmatex">\(log(n+1) - 1 \leq h \leq n - 1\)</span></li>
</ol>
<p>Also if the tree is proper then:</p>
<ol>
<li><span class="arithmatex">\(2h + 1 \leq n \leq w^{h+1} - 1\)</span></li>
<li><span class="arithmatex">\(h + 1 \leq n_E \leq 2^h\)</span></li>
<li><span class="arithmatex">\(h \leq n_I \leq 2^h - 1\)</span></li>
<li><span class="arithmatex">\(log(n+1) - 1 \leq h \leq (n-1)/2\)</span></li>
<li><span class="arithmatex">\(n_E = n_I + 1\)</span></li>
</ol>
<p>For reference, <span class="arithmatex">\(n_E\)</span> = external nodes = nodes with no children. <span class="arithmatex">\(n_I\)</span> = internal nodes = nodes which are not leaves.</p>
<h3 id="array-based-binary-tree">Array Based Binary Tree</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>                (/)
                / \
               /   \
             (x)    (+)
            /  \    /  \
          (+)   3  (-)  2
         /  \      / \
        3    1    9   5

bfs: [/, x, +, +, 3, -, 2, 3, 1, 9, 5, Null, Null]
pre-order: [/, x, +, 3, Null, Null, 1, Null, Null, 3, Null, Null, +, -, 9, Null, Null, 5, Null, Null, 2, Null, Null]
</code></pre></div></td></tr></table></div>
<p>BFS or level numbering of positions to build an array is fairly common. Here a position can be represented by a single integer - the main advantage of this data structure. But operations like deleting and promoting children takes <code>O(n)</code> time.</p>
<h3 id="utilizing-the-general-tree-linked-structure">Utilizing the General Tree Linked Structure</h3>
<p>For a binary tree the children are defined as <code>left</code> and <code>right</code> child.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BinaryTreeNode</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s1">&#39;_element&#39;</span><span class="p">,</span> <span class="s1">&#39;_parent&#39;</span><span class="p">,</span> <span class="s1">&#39;_left&#39;</span><span class="p">,</span> <span class="s1">&#39;_right&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_element</span> <span class="o">=</span> <span class="n">element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">right</span>

<span class="k">class</span> <span class="nc">BinaryTreePosition</span><span class="p">(</span><span class="n">Position</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">node</span>

    <span class="k">def</span> <span class="nf">element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_element</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">_node</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span>

<span class="k">class</span> <span class="nc">BinaryTree</span><span class="p">(</span><span class="n">Tree</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_make_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="n">ifnode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Position</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;p must be proper Position type&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">_container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;p does not belong to this container&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;p is no longer valid&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>

    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_postion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_left</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">num_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_root</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;root exists&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Left child exists&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Node</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_left</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Right child exists&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">node</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Node</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_position</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">old</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">_element</span>
        <span class="n">node</span><span class="o">.</span><span class="n">_element</span> <span class="o">=</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">old</span>

    <span class="k">def</span> <span class="nf">_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_children</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Position has two children&#39;</span><span class="p">)</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="k">else</span> <span class="n">node</span><span class="o">.</span><span class="n">_right</span>
        <span class="k">if</span> <span class="n">child</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">child</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">_parent</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">child</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">_parent</span>
            <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">parent</span><span class="o">.</span><span class="n">_left</span><span class="p">:</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">child</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">child</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">node</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">node</span>
        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">_element</span>

    <span class="k">def</span> <span class="nf">_attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_leaf</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;position must be leaf&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="n">t2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tree types must match&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t1</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">node</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">t1</span><span class="o">.</span><span class="n">_root</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">t1</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t2</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="n">t2</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">node</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">_root</span>
            <span class="n">t2</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">t2</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
<h2 id="tree-traversal-algorithms">Tree Traversal Algorithms</h2>
<p>Go to <a href="../Algorithms/tree%20traversals.html">Algorithms &gt;&gt; Tree Traversals</a></p>
<p>We can also modify our base <code>Tree</code> class to implement the traversal methods as well, with the pre-order traversal being the default one.</p>
<p>Refer to <a href="#tree-abstract-base-class">Tree Abstract Base Class</a> for the other parts of the base class.</p>
<p>Some key observations:</p>
<ol>
<li>we implement the traversals as generator functions where we yield each position to the caller and let the caller decide what action to perform at that position</li>
<li>the <code>positions</code> method returns the iteration as an object - again acting as a generator</li>
<li>the <code>breadth first search</code> or <code>bfs</code> traversal is iterative - not recursive</li>
<li>the <code>inorder</code> traversal is only implemented for <code>binary trees</code> - it does not generalize for generic trees</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Tree</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>

    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">positions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preorder</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">preorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_preorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()):</span>
                <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_subtree_preorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_preorder</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">postorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_postorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()):</span>
                <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_subtree_postorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_postorder</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">other</span>
        <span class="k">yield</span> <span class="n">p</span> 

    <span class="k">def</span> <span class="nf">bfs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="n">fringe</span> <span class="o">=</span> <span class="n">LinkedQueue</span><span class="p">()</span>
            <span class="n">fringe</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">fringe</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">fringe</span><span class="o">.</span><span class="n">dequeue</span><span class="p">()</span>
                <span class="k">yield</span> <span class="n">p</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
                    <span class="n">fringe</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">inorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_inorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">()):</span>
                <span class="k">yield</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_subtree_inorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_inorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">other</span>
        <span class="k">yield</span> <span class="n">p</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_inorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
                <span class="k">yield</span> <span class="n">other</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
<p>As can be seen, while we can implement specific traversals for the <code>Tree</code> class, or the <code>inorder</code> method for binary trees, the code is not general enough to capture the range of computations possible. These were all custom implementations with some repeating algorithmic patterns (e.g. blending of work performed before or after recursion of subtrees). </p>
<p>A more general framework for implemting tree traversals is through <a href="../Algorithms/tree%20traversals.html##Euler%20Tours">Euler tour traversals</a> which also uses the <a href="../../Object%20Oriented%20Programming/template%20method%20pattern.html">Template method</a>.</p>
<h2 id="binary-search-trees">Binary Search Trees</h2>
<p>If we have a set of unique elements that have an order relation  (e.g. a set of integers), we can construct a <strong>binary search tree</strong> such that for each position <code>p</code> of the tree <code>T</code>:</p>
<ol>
<li>Position <code>p</code> stores an element of the set, denoted as <code>e(p)</code></li>
<li>Elements stored in the left subtree of <code>p</code> (if any) are less than <code>e(p)</code></li>
<li>Elements stored in the right subtree of <code>p</code> (if any) are greater than <code>e(p)</code></li>
</ol>
<p><a class="glightbox" href="images/binary%20search%20tree.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="wiki source: https://en.wikipedia.org/wiki/Binary_search_tree#/media/File:Binary_search_tree.svg" src="images/binary%20search%20tree.png" /></a></p>
<p>Binary Search Trees can be used to efficiently implement a <strong>sorted map</strong> - assuming we have an order relation defined on the keys. </p>
<h2 id="navigating-binary-search-trees">Navigating Binary Search Trees</h2>
<p>An <strong>inorder traversal</strong> of a binary search tree visits positions in increasing order of their keys. Therefore if presented with a binary search tree, we can produce a sorted iteration of the keys of a map in linear time.</p>
<p>Hence binary search trees provide a way to produce ordered data in linear time.</p>
<p>Additionally binary search trees can be used to find:</p>
<ol>
<li>position containing the greatest key that is less than the position <code>p</code> - the position that would be visited immediately before position <code>p</code> in an inorder traversal</li>
<li>position containing the least key that is great than the position <code>p</code> - the position that would be visited immediately after position <code>p</code> in an inorder traversal</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="n">then</span> <span class="p">{</span><span class="n">successor</span> <span class="ow">is</span> <span class="n">leftmost</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">p</span><span class="s1">&#39;s right subtree}:</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">left</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="n">do</span><span class="p">:</span>
            <span class="n">walk</span> <span class="o">=</span> <span class="n">left</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">walk</span>

    <span class="k">else</span><span class="p">:</span> <span class="p">{</span><span class="n">successor</span> <span class="ow">is</span> <span class="n">nearest</span> <span class="n">ancestor</span> <span class="n">having</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">its</span> <span class="n">left</span> <span class="n">subtree</span><span class="p">}</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">p</span>
        <span class="n">ancestor</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">ancestor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">walk</span> <span class="o">==</span> <span class="n">right</span> <span class="p">(</span><span class="n">ancestor</span><span class="p">)</span> <span class="n">do</span><span class="p">:</span>
            <span class="n">walk</span> <span class="o">=</span> <span class="n">ancestor</span>
            <span class="n">ancestor</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ancestor</span>
</code></pre></div></td></tr></table></div>
<h3 id="searches">Searches</h3>
<p>We can traverse a binary search tree to search for specific keys in O(log(n)) time complexty <strong>as long as it is balanced</strong>. In the worst (imbalanced) case the height <code>h</code> of the tree can be equal to the <code>n</code> in which case the time complexity would be O(h) = O(n) instead.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">TreeSearch</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="n">then</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">p</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">and</span> <span class="n">T</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="n">then</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TreeSearch</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">and</span> <span class="n">T</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="n">then</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TreeSearch</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span> <span class="c1"># return the last node if key not found</span>
</code></pre></div></td></tr></table></div>
<h3 id="insertions">Insertions</h3>
<p>Search for key <code>k</code>, and if found, that item's existing value is reassigned. If not found, a new item is inserted into the underlying tree T in place of theempty subtree that was reached at the end of the fialed search.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">TreeInsert</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="c1"># Tree T, search key k, and value v to be associated with key k</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">TreeSearch</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">root</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="n">then</span><span class="p">:</span>
        <span class="nb">set</span> <span class="n">p</span><span class="s1">&#39;s value to v</span>
    <span class="k">elif</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="n">then</span><span class="p">:</span>
        <span class="n">add</span> <span class="n">node</span> <span class="k">with</span> <span class="n">item</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">as</span> <span class="n">left</span> <span class="n">child</span> <span class="n">of</span> <span class="n">p</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">add</span> <span class="n">node</span> <span class="k">with</span> <span class="n">item</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">as</span> <span class="n">righ</span> <span class="n">child</span> <span class="n">of</span> <span class="n">p</span>
</code></pre></div></td></tr></table></div>
<p>This is always enacted at the bottom of a path.</p>
<p>O(h)</p>
<h3 id="deletions">Deletions</h3>
<p>More complicated than insertions as they can happen in any part of the tree.</p>
<p>Steps:
- If key k is successfully found in tree T:
  - if p has at most one child, delete item with key k at position p, and reoplace it with its child
  - if p has two children: locate the predecessor (the rightmost position of the left subtree of p) i.e. <code>r = before(p)</code>, then use <code>r</code> as replace for the position <code>p</code>, and then delete <code>r</code> (simple as it does not have a right child by defition)</p>
<p>O(h)</p>
<h2 id="python-implementation">Python Implementation</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BinarySearchTreePosition</span><span class="p">(</span><span class="n">BinaryTreePosition</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Return key of map&#39;s key-value pair.&quot;&quot;&quot;</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">()</span><span class="o">.</span><span class="n">_key</span>

    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot;Return value of map&#39;s key-value pair.&quot;&quot;&quot;</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">()</span><span class="o">.</span><span class="n">_value</span>

<span class="k">class</span> <span class="nc">BinarySearchTree</span><span class="p">(</span><span class="n">BinaryTree</span><span class="p">,</span> <span class="n">MapBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Position of p&#39;s subtree having key k, or last node searched.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>                                   <span class="c1"># found match</span>
        <span class="k">return</span> <span class="n">p</span>                                         
        <span class="k">elif</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>                                  <span class="c1"># search left subtree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>   
        <span class="k">else</span><span class="p">:</span>                                              <span class="c1"># search right subtree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span>                                           <span class="c1"># unsucessful search</span>

    <span class="k">def</span> <span class="nf">_subtree_first_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Position of first item in subtree rooted at p.&quot;&quot;&quot;</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">p</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>                 <span class="c1"># keep walking left</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">walk</span>

    <span class="k">def</span> <span class="nf">_subtree_last_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Position of last item in subtree rooted at p.&quot;&quot;&quot;</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">p</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>                <span class="c1"># keep walking right</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">walk</span>

    <span class="c1">#--------------------- public methods providing &quot;positional&quot; support ---------------------</span>
    <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the first Position in the tree (or None if empty).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_first_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">())</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">last</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the last Position in the tree (or None if empty).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_last_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">())</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the Position just before p in the natural order.</span>

<span class="sd">        Return None if p is the first position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                            <span class="c1"># inherited from LinkedBinaryTree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_last_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="c1"># walk upward</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">p</span>
        <span class="n">above</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">above</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">walk</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">above</span><span class="p">):</span>
            <span class="n">walk</span> <span class="o">=</span> <span class="n">above</span>
            <span class="n">above</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">above</span>

    <span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the Position just after p in the natural order.</span>

<span class="sd">        Return None if p is the last position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                            <span class="c1"># inherited from LinkedBinaryTree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_first_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">walk</span> <span class="o">=</span> <span class="n">p</span>
        <span class="n">above</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">above</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">walk</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">above</span><span class="p">):</span>
            <span class="n">walk</span> <span class="o">=</span> <span class="n">above</span>
            <span class="n">above</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">walk</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">above</span>

    <span class="k">def</span> <span class="nf">find_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return position with key k, or else neighbor (or None if empty).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_access</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                  <span class="c1"># hook for balanced tree subclasses</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove the item at given Position.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                            <span class="c1"># inherited from LinkedBinaryTree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>           <span class="c1"># p has two children</span>
        <span class="n">replacement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_last_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">replacement</span><span class="o">.</span><span class="n">element</span><span class="p">())</span>    <span class="c1"># from LinkedBinaryTree</span>
        <span class="n">p</span> <span class="o">=</span>  <span class="n">replacement</span>
        <span class="c1"># now p has at most one child</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_delete</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                              <span class="c1"># inherited from LinkedBinaryTree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_delete</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>               <span class="c1"># if root deleted, parent is None</span>

    <span class="c1">#--------------------- public methods for (standard) map interface ---------------------</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return value associated with key k (raise KeyError if not found).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Key Error: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_access</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                  <span class="c1"># hook for balanced tree subclasses</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Key Error: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign value v to key k, overwriting existing value if present.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="n">leaf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Item</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>     <span class="c1"># from LinkedBinaryTree</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">k</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">element</span><span class="p">()</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">v</span>                   <span class="c1"># replace existing item&#39;s value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_access</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                <span class="c1"># hook for balanced tree subclasses</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Item</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">:</span>
            <span class="n">leaf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_right</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>        <span class="c1"># inherited from LinkedBinaryTree</span>
            <span class="k">else</span><span class="p">:</span>
            <span class="n">leaf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_left</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>         <span class="c1"># inherited from LinkedBinaryTree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_insert</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span>                 <span class="c1"># hook for balanced tree subclasses</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove item associated with key k (raise KeyError if not found).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subtree_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                           <span class="c1"># rely on positional version</span>
            <span class="k">return</span>                                   <span class="c1"># successful deletion complete</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rebalance_access</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                  <span class="c1"># hook for balanced tree subclasses</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Key Error: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an iteration of all keys in the map in order.&quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="c1">#--------------------- public methods for sorted map interface ---------------------</span>
    <span class="k">def</span> <span class="fm">__reversed__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an iteration of all keys in the map in reverse order.&quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with minimum key (or None if empty).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">find_max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with maximum key (or None if empty).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">find_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with greatest key less than or equal to k.</span>

<span class="sd">        Return None if there does not exist such a key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_position</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">find_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with greatest key strictly less than k.</span>

<span class="sd">        Return None if there does not exist such a key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_position</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">find_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with least key greater than or equal to k.</span>

<span class="sd">        Return None if there does not exist such a key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_position</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>                   <span class="c1"># may not find exact match</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">:</span>                             <span class="c1"># p&#39;s key is too small</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">find_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return (key,value) pair with least key strictly greater than k.</span>

<span class="sd">        Return None if there does not exist such a key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_position</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">():</span>                   
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">find_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate all (key,value) pairs such that start &lt;= key &lt; stop.</span>

<span class="sd">        If start is None, iteration begins with minimum key of map.</span>
<span class="sd">        If stop is None, iteration continues through the maximum key of map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we initialize p with logic similar to find_ge</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_position</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">):</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">key</span><span class="p">(),</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="c1">#--------------------- hooks used by subclasses to balance a tree ---------------------</span>
    <span class="k">def</span> <span class="nf">_rebalance_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Call to indicate that position p is newly added.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_rebalance_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Call to indicate that a child of p has been removed.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_rebalance_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Call to indicate that position p was recently accessed.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1">#--------------------- nonpublic methods to support tree balancing ---------------------</span>

    <span class="k">def</span> <span class="nf">_relink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">make_left_child</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Relink parent node with child node (we allow child to be None).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">make_left_child</span><span class="p">:</span>                           <span class="c1"># make it a left child</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">child</span>
        <span class="k">else</span><span class="p">:</span>                                         <span class="c1"># make it a right child</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">child</span>
        <span class="k">if</span> <span class="n">child</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>                         <span class="c1"># make child point to parent</span>
        <span class="n">child</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>

    <span class="k">def</span> <span class="nf">_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rotate Position p above its parent.</span>

<span class="sd">        Switches between these configurations, depending on whether p==a or p==b.</span>

<span class="sd">            b                  a</span>
<span class="sd">            / \                /  \</span>
<span class="sd">            a  t2             t0   b</span>
<span class="sd">        / \                     / \</span>
<span class="sd">        t0  t1                  t1  t2</span>

<span class="sd">        Caller should ensure that p is not the root.</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rotate Position p above its parent.&quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">_parent</span>                                 <span class="c1"># we assume this exists</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">_parent</span>                                 <span class="c1"># grandparent (possibly None)</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>            
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">x</span>                              <span class="c1"># x becomes root</span>
        <span class="n">x</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>        
        <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relink</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">==</span> <span class="n">z</span><span class="o">.</span><span class="n">_left</span><span class="p">)</span>            <span class="c1"># x becomes a direct child of z</span>
        <span class="c1"># now rotate x and y, including transfer of middle subtree</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="o">.</span><span class="n">_left</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relink</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">_right</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>             <span class="c1"># x._right becomes left child of y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relink</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>                   <span class="c1"># y becomes right child of x</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relink</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>             <span class="c1"># x._left becomes right child of y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relink</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>                    <span class="c1"># y becomes left child of x</span>

    <span class="k">def</span> <span class="nf">_restructure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform a trinode restructure among Position x, its parent, and its grandparent.</span>

<span class="sd">        Return the Position that becomes root of the restructured subtree.</span>

<span class="sd">        Assumes the nodes are in one of the following configurations:</span>

<span class="sd">            z=a                 z=c           z=a               z=c  </span>
<span class="sd">        /  \                /  \          /  \              /  \  </span>
<span class="sd">        t0  y=b             y=b  t3       t0   y=c          y=a  t3 </span>
<span class="sd">            /  \            /  \               /  \         /  \     </span>
<span class="sd">            t1  x=c         x=a  t2            x=b  t3      t0   x=b    </span>
<span class="sd">            /  \        /  \               /  \              /  \    </span>
<span class="sd">            t2  t3      t0  t1             t1  t2            t1  t2   </span>

<span class="sd">        The subtree will be restructured so that the node with key b becomes its root.</span>

<span class="sd">                b</span>
<span class="sd">                /   \</span>
<span class="sd">            a       c</span>
<span class="sd">            / \     / \</span>
<span class="sd">            t0  t1  t2  t3</span>

<span class="sd">        Caller should ensure that x has a grandparent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform trinode restructure of Position x with parent/grandparent.&quot;&quot;&quot;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="o">==</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">z</span><span class="p">)):</span>  <span class="c1"># matching alignments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                 <span class="c1"># single rotation (of y)</span>
        <span class="k">return</span> <span class="n">y</span>                                        <span class="c1"># y is new subtree root</span>
        <span class="k">else</span><span class="p">:</span>                                             <span class="c1"># opposite alignments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotate</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                                 <span class="c1"># double rotation (of x)     </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotate</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>                                        <span class="c1"># x is new subtree root</span>
</code></pre></div></td></tr></table></div>
<h2 id="self-balancing-trees">Self Balancing Trees</h2>
<p>Some sequences of operations on binary search trees may lead to an unbalanced tree with height proportional to <code>n</code>. Hence we may only claim <code>O(n)</code> search.</p>
<p>However there are common search tree algorthms that provide stronger performance guarantees. AVL, Splay and Red-Black trees are based on augmenting the standard binary search tree with occasional operations to reshape the tree and reduce its height. </p>
<p>The primary operation to rebalance a binary search tree is known as a <strong>rotation</strong>. During a rotation, we "rotate" a child to be above its parent, as diagrammed below:</p>
<p><a class="glightbox" href="images/balanced%20search%20trees.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="source: https://www.hackerrank.com/challenges/self-balancing-tree/problem" src="images/balanced%20search%20trees.png" /></a></p>
<p>There are two primary types of rotations: left rotations and right rotations. Both types are used to adjust the structure of the tree without violating the binary search tree properties, where the left child of a node is less than the node, and the right child is greater.</p>
<h3 id="right-rotation">Right Rotation</h3>
<p>A right rotation is performed on a node that has a left child. This operation shifts the node down to the right, making its left child the new parent of the subtree. Here's how it works:</p>
<ol>
<li>Given a node <code>X</code> with a left child <code>Y</code>, <code>Y</code> will become the new root of the subtree.</li>
<li><code>X</code>'s left subtree becomes <code>Y</code>'s right subtree.</li>
<li><code>Y</code> takes the place of <code>X</code>, and <code>X</code> becomes the right child of <code>Y</code>.</li>
</ol>
<p>This operation is used when the tree becomes left-heavy, and we need to decrease the height of the left subtree to maintain balance.</p>
<h3 id="left-rotation">Left Rotation</h3>
<p>A left rotation is the mirror operation of a right rotation. It is performed on a node that has a right child, shifting the node down to the left and making its right child the new parent of the subtree. Here's the step-by-step process:</p>
<ol>
<li>Given a node <code>X</code> with a right child <code>Y</code>, <code>Y</code> will become the new root of the subtree.</li>
<li><code>X</code>'s right subtree becomes <code>Y</code>'s left subtree.</li>
<li><code>Y</code> takes the place of <code>X</code>, and <code>X</code> becomes the left child of <code>Y</code>.</li>
</ol>
<p>This operation is used when the tree becomes right-heavy, and we need to decrease the height of the right subtree.</p>
<h3 id="visual-representation">Visual Representation</h3>
<p>Let's illustrate both rotations with diagrams. For a right rotation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="nt">X</span><span class="w">               </span><span class="nt">Y</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="err">\</span><span class="w">             </span><span class="o">/</span><span class="w"> </span><span class="err">\</span>
<span class="w">  </span><span class="nt">Y</span><span class="w">   </span><span class="nt">C</span><span class="w">   </span><span class="nt">---</span><span class="o">&gt;</span><span class="w">    </span><span class="nt">A</span><span class="w">   </span><span class="nt">X</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="err">\</span><span class="w">                 </span><span class="o">/</span><span class="w"> </span><span class="err">\</span>
<span class="nt">A</span><span class="w">   </span><span class="nt">B</span><span class="w">               </span><span class="nt">B</span><span class="w">   </span><span class="nt">C</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TreeNode</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">rightRotate</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="n">newRoot</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">left</span>
    <span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">right</span>
    <span class="n">newRoot</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">root</span>
    <span class="k">return</span> <span class="n">newRoot</span>
</code></pre></div></td></tr></table></div>
<p>and for a left rotation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">X</span><span class="w">               </span><span class="nt">Y</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="err">\</span><span class="w">             </span><span class="o">/</span><span class="w"> </span><span class="err">\</span>
<span class="nt">A</span><span class="w">   </span><span class="nt">Y</span><span class="w">    </span><span class="nt">---</span><span class="o">&gt;</span><span class="w">   </span><span class="nt">X</span><span class="w">   </span><span class="nt">C</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="err">\</span><span class="w">         </span><span class="o">/</span><span class="w"> </span><span class="err">\</span>
<span class="w">  </span><span class="nt">B</span><span class="w">   </span><span class="nt">C</span><span class="w">       </span><span class="nt">A</span><span class="w">   </span><span class="nt">B</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">leftRotate</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="n">newRoot</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">right</span>
    <span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">left</span>
    <span class="n">newRoot</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">root</span>
    <span class="k">return</span> <span class="n">newRoot</span>
</code></pre></div></td></tr></table></div>
<h3 id="avl-trees">AVL Trees</h3>
<p>AVL Trees store a balance factor on each node that follows the <strong>height balance property</strong> where for each position p of T, th heights of the children of p differ at most by  1.</p>
<p>The height is defined as the longest path from the node to a leaf.</p>
<p>Hence the subtree of an AVL tree is itself an AVL tree. The height of an AVL tree storing n entries is <code>O(logn)</code>.</p>
<p>The insertion and deletion operations of AVL trees begin similarly to the corresponding operations for binary search trees, but with post-processing for each oepration to restore the balance of ay portions of the tree that are adversely affected by the change.</p>
<h4 id="insertion-in-avl-trees">Insertion in AVL Trees</h4>
<p>Insertion into an AVL tree involves several steps:</p>
<ol>
<li><strong>BST Insertion</strong>: The node is inserted following the binary search tree rules.</li>
<li><strong>Updating Heights</strong>: After insertion, the heights of the ancestors of the inserted node are updated.</li>
<li><strong>Balancing the Tree</strong>: If any ancestor node becomes unbalanced (balance factor is not -1, 0, or 1), rotations are performed to balance the tree.</li>
</ol>
<h5 id="rotations-for-rebalancing">Rotations for Rebalancing</h5>
<p>Depending on the structure of the tree at the unbalanced node, one of the following rotations is performed:</p>
<ul>
<li><strong>Single Right Rotation (LL Rotation)</strong>: When the left subtree of the left child is causing the imbalance.</li>
<li><strong>Single Left Rotation (RR Rotation)</strong>: When the right subtree of the right child is causing the imbalance.</li>
<li><strong>Left-Right Rotation (LR Rotation)</strong>: When the right subtree of the left child is causing the imbalance.</li>
<li><strong>Right-Left Rotation (RL Rotation)</strong>: When the left subtree of the right child is causing the imbalance.</li>
</ul>
<h4 id="deletion-in-avl-trees">Deletion in AVL Trees</h4>
<p>Deletion from an AVL tree is a bit more complex:</p>
<ol>
<li><strong>Node Removal</strong>: Follows the basic BST deletion rules.</li>
<li><strong>Balancing the Tree</strong>: After deletion, the tree might become unbalanced. The same procedure of updating heights and performing rotations is followed to restore balance.</li>
</ol>
<h4 id="performance-of-avl-trees">Performance of AVL Trees</h4>
<ul>
<li><strong>Search</strong>: <span class="arithmatex">\(O(\log n)\)</span> - AVL trees ensure that the height of the tree is always logarithmic in the number of nodes, guaranteeing efficient searches.</li>
<li><strong>Insertion</strong>: <span class="arithmatex">\(O(\log n)\)</span> - Insertions may require a constant number of rotations, but the overall time complexity remains logarithmic.</li>
<li><strong>Deletion</strong>: <span class="arithmatex">\(O(\log n)\)</span> - Similar to insertion, deletions are logarithmic in time complexity, including potential rotations for rebalancing.</li>
</ul>
<h3 id="red-black-trees">Red-Black Trees</h3>
<p>A Red-Black tree is characterized by several key properties:</p>
<ol>
<li><strong>Node Color</strong>: Each node is colored either red or black.</li>
<li><strong>Root Property</strong>: The root node is always black.</li>
<li><strong>Red Node Property</strong>: Red nodes cannot have red children. This means no two red nodes can be adjacent.</li>
<li><strong>Black Height Property</strong>: Every path from a node to its descendant NULL nodes must contain the same number of black nodes. This consistent count of black nodes is known as the black height.</li>
<li><strong>New Nodes are Red</strong>: Newly inserted nodes are always colored red. This helps maintain the black height property with fewer rotations.</li>
</ol>
<h4 id="insertion">Insertion</h4>
<p>Inserting a new node into a Red-Black tree involves several steps:</p>
<ol>
<li><strong>BST Insertion</strong>: Initially, the node is inserted according to the rules of a binary search tree (BST), based on key comparisons.</li>
<li><strong>Coloring</strong>: The new node is colored red.</li>
<li><strong>Rebalancing</strong>: The tree is adjusted to maintain the Red-Black properties through recoloring and rotations.</li>
</ol>
<p>The rebalancing phase takes into account various cases depending on the color of the uncle node (the sibling of the new node's parent) and the structure of the tree, aiming to fix any violations of the Red-Black properties.</p>
<h4 id="deletion">Deletion</h4>
<p>Deletion in a Red-Black tree is more complex due to the balancing properties:</p>
<ol>
<li><strong>Node Removal</strong>: Follows the BST deletion rules. If the node to be deleted has two children, it's replaced with its in-order successor or predecessor, which is then deleted.</li>
<li><strong>Rebalancing</strong>: If a black node was deleted or replaced, the tree might need to be rebalanced to maintain the black height.</li>
</ol>
<p>Rebalancing after deletion also considers several cases, focusing on the color of the sibling of the node being fixed and the color of the sibling's children.</p>
<h4 id="rotations">Rotations</h4>
<p>Rotations help maintain or restore Red-Black properties during insertions and deletions:</p>
<ul>
<li><strong>Left Rotation</strong>: Performed when the tree is too heavy on the right, rotating a parent node to the left around its right child.</li>
<li><strong>Right Rotation</strong>: Used when the tree is too heavy on the left, rotating a parent node to the right around its left child.</li>
</ul>
<h4 id="performance">Performance</h4>
<p>Operations such as search, insertion, and deletion in Red-Black trees have a time complexity of <span class="arithmatex">\(O(\log n)\)</span>, where <span class="arithmatex">\(n\)</span> is the number of nodes. This efficiency is due to the tree's self-balancing nature, ensuring operations remain fast.</p>
<h4 id="python-implementation_1">Python Implementation</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RedBlackTreeMap</span><span class="p">(</span><span class="n">BinarySearchTree</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Sorted map implementation using a red-black tree.&quot;&quot;&quot;</span>

  <span class="c1">#-------------------------- nested _Node class --------------------------</span>
  <span class="k">class</span> <span class="nc">_Node</span><span class="p">(</span><span class="n">TreeMap</span><span class="o">.</span><span class="n">_Node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Node class for red-black tree maintains bit that denotes color.&quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s1">&#39;_red&#39;</span>     <span class="c1"># add additional data member to the Node class</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_red</span> <span class="o">=</span> <span class="kc">True</span>     <span class="c1"># new node red by default</span>

  <span class="c1">#------------------------- positional-based utility methods -------------------------</span>
  <span class="c1"># we consider a nonexistent child to be trivially black</span>
  <span class="k">def</span> <span class="nf">_set_red</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_red</span> <span class="o">=</span> <span class="kc">True</span>
  <span class="k">def</span> <span class="nf">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_red</span> <span class="o">=</span> <span class="kc">False</span>
  <span class="k">def</span> <span class="nf">_set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">make_red</span><span class="p">):</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_red</span> <span class="o">=</span> <span class="n">make_red</span>
  <span class="k">def</span> <span class="nf">_is_red</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span> <span class="k">return</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">_red</span>
  <span class="k">def</span> <span class="nf">_is_red_leaf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_leaf</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">_get_red_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a red child of p (or None if no such child).&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">child</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">child</span>
    <span class="k">return</span> <span class="kc">None</span>

  <span class="c1">#------------------------- support for insertions -------------------------</span>
  <span class="k">def</span> <span class="nf">_rebalance_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_red</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                         <span class="c1"># new node is always red</span>

  <span class="k">def</span> <span class="nf">_resolve_red</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_root</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>                         <span class="c1"># make root black</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">parent</span><span class="p">):</span>                   <span class="c1"># double red problem</span>
        <span class="n">uncle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sibling</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">uncle</span><span class="p">):</span>              <span class="c1"># Case 1: misshapen 4-node</span>
          <span class="n">middle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restructure</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>          <span class="c1"># do trinode restructuring</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="n">middle</span><span class="p">)</span>                <span class="c1"># and then fix colors</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_red</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">middle</span><span class="p">))</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_red</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">middle</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>                                    <span class="c1"># Case 2: overfull 5-node</span>
          <span class="n">grand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>            
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_red</span><span class="p">(</span><span class="n">grand</span><span class="p">)</span>                   <span class="c1"># grandparent becomes red</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">grand</span><span class="p">))</span>      <span class="c1"># its children become black</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">grand</span><span class="p">))</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_red</span><span class="p">(</span><span class="n">grand</span><span class="p">)</span>               <span class="c1"># recur at red grandparent</span>

  <span class="c1">#------------------------- support for deletions -------------------------</span>
  <span class="k">def</span> <span class="nf">_rebalance_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>                                     
      <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>  <span class="c1"># special case: ensure that root is black</span>
    <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_children</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>                    <span class="c1"># deficit exists unless child is a red leaf</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red_leaf</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_fix_deficit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
      <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>                  <span class="c1"># removed black node with red child</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red_leaf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

  <span class="k">def</span> <span class="nf">_fix_deficit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolve black deficit at z, where y is the root of z&#39;s heavier subtree.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">y</span><span class="p">):</span> <span class="c1"># y is black; will apply Case 1 or 2</span>
      <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_red_child</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># Case 1: y is black and has red child x; do &quot;transfer&quot;</span>
        <span class="n">old_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">middle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_restructure</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_color</span><span class="p">(</span><span class="n">middle</span><span class="p">,</span> <span class="n">old_color</span><span class="p">)</span>   <span class="c1"># middle gets old color of z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">middle</span><span class="p">))</span>   <span class="c1"># children become black</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">middle</span><span class="p">))</span>
      <span class="k">else</span><span class="p">:</span> <span class="c1"># Case 2: y is black, but no red children; recolor as &quot;fusion&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_red</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_red</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>                 <span class="c1"># this resolves the problem</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_root</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">_fix_deficit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sibling</span><span class="p">(</span><span class="n">z</span><span class="p">))</span> <span class="c1"># recur upward</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># Case 3: y is red; rotate misaligned 3-node and repeat</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_rotate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_set_black</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_set_red</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fix_deficit</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fix_deficit</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h3 id="splay-trees">Splay Trees</h3>
<p>Splay trees are a type of self-adjusting binary search tree with the unique property that recently accessed elements are moved to the root of the tree using a process called splaying. This makes frequently accessed elements quicker to access again in the future.</p>
<h4 id="key-characteristics">Key Characteristics</h4>
<p>Unlike traditional binary search trees, splay trees do not maintain strict balance. Instead, they perform a series of rotations (splays) to move an accessed node to the root. This adaptive strategy optimizes the tree's structure based on usage patterns, often providing better performance for sequences of non-random operations.</p>
<h4 id="splaying-operations">Splaying Operations</h4>
<p>Splaying involves performing rotations on a node until it becomes the root of the tree. There are several types of splay operations, depending on the position of the node and its parents:</p>
<ul>
<li><strong>Zig</strong>: A single rotation is used when the node is a direct child of the root.</li>
<li><strong>Zig-Zig</strong>: A double rotation is used when both the node and its parent are either left children or right children.</li>
<li><strong>Zig-Zag</strong>: A double rotation of different types (first right then left, or first left then right) is used when the node is a right child and its parent is a left child, or vice versa.</li>
</ul>
<h4 id="insertion-in-splay-trees">Insertion in Splay Trees</h4>
<p>Insertion in a splay tree follows these steps:</p>
<ol>
<li><strong>Insert the new node</strong>: First, insert the new node using the standard binary search tree insertion procedure.</li>
<li><strong>Splay the node</strong>: After insertion, splay the inserted node, moving it to the root of the tree.</li>
</ol>
<h4 id="deletion-in-splay-trees">Deletion in Splay Trees</h4>
<p>Deletion in a splay tree involves:</p>
<ol>
<li><strong>Splay the node</strong>: First, splay the node to be deleted, bringing it to the root of the tree.</li>
<li><strong>Remove the node</strong>: If the node has two children, replace it with its successor or predecessor, then splay that node to the root and remove the original node. If it has one or no children, simply remove it as in a BST.</li>
</ol>
<h4 id="searching-in-splay-trees">Searching in Splay Trees</h4>
<p>To search for a value in a splay tree:</p>
<ol>
<li><strong>Perform standard BST search</strong>: Find the node containing the value.</li>
<li><strong>Splay the node</strong>: Whether found or not, splay the last accessed node to the root.</li>
</ol>
<h4 id="performance-of-splay-trees">Performance of Splay Trees</h4>
<p>The performance of splay trees is not strictly <span class="arithmatex">\(O(\log n)\)</span> for individual operations. However, they offer amortized <span class="arithmatex">\(O(\log n)\)</span> performance over a sequence of operations due to the self-adjusting nature of splaying. This makes them particularly effective for applications with non-uniform access patterns.</p>
<h3 id="24-trees">(2,4) Trees</h3>
<p>(2,4) trees, also known as 2-4 trees, are a type of balanced tree data structure that provides an efficient way to manage and search for data. They are a special case of B-trees and are particularly useful in databases and filesystems.</p>
<h4 id="key-characteristics_1">Key Characteristics</h4>
<ul>
<li><strong>Node Capacity</strong>: Each node in a (2,4) tree can have between 2 and 4 children, and accordingly, 1 to 3 keys.</li>
<li><strong>Balanced Height</strong>: All leaves are at the same depth, which ensures that operations are performed in logarithmic time.</li>
<li><strong>Flexible Node Configuration</strong>: The ability to have a variable number of children and keys allows (2,4) trees to remain balanced with a minimal number of tree rotations and rebalancing.</li>
</ul>
<h4 id="operations-in-24-trees">Operations in (2,4) Trees</h4>
<h5 id="insertion_1">Insertion</h5>
<p>When inserting a new key into a (2,4) tree:
1. <strong>Find the correct leaf node</strong> where the key should be inserted, following standard tree search procedures.
2. <strong>Insert the key</strong> into the node.
   - If the node has fewer than 3 keys, simply add the new key.
   - If the node already contains 3 keys, it is split into two nodes, each with fewer keys, and the middle key is moved up to the parent. This process may propagate up the tree.</p>
<h5 id="deletion_1">Deletion</h5>
<p>Deletion from a (2,4) tree involves:
1. <strong>Locating the key</strong> to be deleted.
2. <strong>Removing the key</strong> and rebalancing the tree.
   - If removing the key would leave a node with fewer than 1 key, keys or nodes are redistributed to maintain the tree's balance. This might involve borrowing a key from a sibling node or merging with a sibling if both have the minimum number of keys.</p>
<h5 id="searching">Searching</h5>
<p>Searching for a key in a (2,4) tree follows the basic principles of binary search within the keys of each visited node and choosing the appropriate child to continue the search based on the comparison.</p>
<h4 id="balancing-and-performance">Balancing and Performance</h4>
<ul>
<li><strong>Balancing</strong>: (2,4) trees are self-balancing, with each operation ensuring that the tree remains balanced, thus maintaining its performance guarantees.</li>
<li><strong>Performance</strong>: The operations of search, insertion, and deletion in a (2,4) tree all have a worst-case time complexity of <span class="arithmatex">\(O(\log n)\)</span>, where <span class="arithmatex">\(n\)</span> is the number of keys in the tree.</li>
</ul>
<h2 id="segment-trees">Segment Trees</h2>
<div class="admonition note">
<p>TODO: Add notes here - leaving blank for now.</p>
</div>
<h2 id="fenwick-trees">Fenwick Trees</h2>
<div class="admonition note">
<p>TODO: Add notes here - leaving blank for now.</p>
</div>
<p><strong>References</strong></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Skiena, Steven S.. (2008). The Algorithm Design Manual, 2<sup>nd</sup> ed. (2). : Springer Publishing Company.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Goodrich, M. T., Tamassia, R., &amp; Goldwasser, M. H. (2013). Data Structures and Algorithms in Python (1<sup>st</sup> ed.). Wiley Publishing.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Cormen, T. H., Leiserson, C. E., &amp; Rivest, R. L. (1990). Introduction to algorithms. Cambridge, Mass. : New York, MIT Press.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Raghav Saboo
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["search.highlight", "search.share", "navigation.tabs", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "toc.follow", "navigation.top", "header.autohide"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="../../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>